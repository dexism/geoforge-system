<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>運命を刻む元帳 ベンチャー of テイルズ TRPG(仮)</title>
    <link rel="stylesheet" href="rulebook.css">
</head>
<body>
    <script src="//accaii.com/ventureoftales/script.js" async></script><noscript><img src="//accaii.com/ventureoftales/script?guid=on"></noscript>
    
    <input type="checkbox" id="menu-toggle" class="menu-toggle-checkbox">
    <label for="menu-toggle" class="menu-toggle-label">
        <span></span>
    </label>

    <header>
        <div class="header-content">
            <h2>運命を刻む元帳</h2>
            <h1>ベンチャー of テイルズ TRPG<small>(仮)</small></h1>
            <h2>～Pilot Season: 黄金と砂塵のモノローグ～</h2>
            <p class="sub-title">基本ルールブック</p>
            <p>TRPG開発プロジェクト Candle's.</p>
            <p>2025.11.231820</p>
        </div>
    </header>

    <div class="container">
        <!-- サイドバー（目次） -->
        <nav class="sidebar">
            <h3>目次</h3>
            <ul>
                <li>
                    <details open>
                        <summary><a href="#hajimeni">1 はじめに</a></summary>
                        <ul>
                            <li><a href="#trailer">1.1 トレーラー</a></li>
                            <li><a href="#welcome">1.2 ようこそ</a></li>
                            <li><a href="#replay">1.3 イメージリプレイ</a></li>
                            <li><a href="#gaiyou">1.4 ゲームの概要</a></li>
                            <li><a href="#sekai">1.5 舞台となる世界</a></li>
                            <li><a href="#keiei">1.6 この世界における「経営」とは</a></li>
                        </ul>
                    </details>
                </li>
                <li>
                    <details open>
                        <summary><a href="#player-section">2 プレイヤーセクション</a></summary>
                         <ul>
                            <li><a href="#template-char">2.1 テンプレートキャラクター</a></li>
                            <li><a href="#create-char">2.2 キャラクターの創造</a></li>
                            <li><a href="#trpg-part">2.3 TRPGパート</a></li>
                            <li><a href="#slg-part">2.4 経営SLGパート</a></li>
                        </ul>
                    </details>
                </li>
                <li>
                    <details open>
                        <summary><a href="#teller-section">3 テラーセクション</a></summary>
                        <ul>
                            <li><a href="#teller-prepare">3.1 セッションの準備</a></li>
                            <li><a href="#teller-npc">3.2 世界を彩る人々（NPC）</a></li>
                            <li><a href="#teller-manage">3.3 TRPGパートの進行管理</a></li>
                            <li><a href="#teller-enemy">3.4 プレイヤーの前に立ちはだかるもの</a></li>
                        </ul>
                    </details>
                </li>
                 <li>
                    <details open>
                        <summary><a href="#scenario-section">4 シナリオセクション</a></summary>
                        <ul>
                           <li><a href="#scenario-sample">4.1 サンプルシナリオ『暁のキャラバン』</a></li>
                           <li><a href="#scenario-sample-2">4.2 サンプルシナリオ②</a></li>
                        </ul>
                    </details>
                </li>
                <li>
                    <details open>
                        <summary><a href="#data-section">5 データセクション</a></summary>
                         <ul>
                           <li><a href="#class-list">5.1 クラス一覧</a></li>
                           <li><a href="#skill-list">5.2 スキル一覧</a></li>
                           <li><a href="#jigyo-list">5.3 事業一覧</a></li>
                           <li><a href="#event-list">5.4 イベント一覧</a></li>
                           <li><a href="#glossary">5.5 用語集</a></li>
                        </ul>
                    </details>
                </li>
            </ul>
        </nav>

        <!-- コンテンツ表示エリア -->
        <main id="main-content">
            <p style="text-align: center; padding: 2rem;">コンテンツを読み込み中...</p>
        </main>
    </div>

    <footer>
        <p>&copy; 2025 Candle's. All rights reserved.</p>
    </footer>

    <!-- コンテンツ合成用スクリプト -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const mainContent = document.getElementById('main-content');
            
            // 読み込むファイルのリスト（順番通りに結合されます）
            const files = [
                'sections/01_introduction.html',
                'sections/02_player.html',
                'sections/03_teller.html',
                'sections/04_scenario.html',
                'sections/05_data.html'
            ];

            // Promiseを使って順番に読み込み
            Promise.all(files.map(file => fetch(file).then(res => {
                if (!res.ok) throw new Error(`Failed to load ${file}`);
                return res.text();
            })))
            .then(htmlContents => {
                // ローディング表示を消去して結合したHTMLを挿入
                mainContent.innerHTML = htmlContents.join('');
                
                // URLにハッシュ(#id)がある場合、その位置へスクロール
                if(window.location.hash) {
                    const id = window.location.hash.substring(1);
                    const element = document.getElementById(id);
                    if(element) element.scrollIntoView();
                }
            })
            .catch(err => {
                console.error(err);
                mainContent.innerHTML = `<div class="failure-color" style="padding:1rem;">
                    <h3>読み込みエラー</h3>
                    <p>ローカル環境で実行している場合、ブラウザのセキュリティ制限(CORS)によりファイルを読み込めない可能性があります。<br>
                    VS Codeの「Live Server」拡張機能などを使用するか、ローカルサーバー経由でアクセスしてください。</p>
                </div>`;
            });
        });
    </script>
</body>
</html>