<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>GeoForge System - World Map</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <script src="//accaii.com/geoforge/script.js" async></script><noscript><img src="//accaii.com/geoforge/script?guid=on"></noscript>
  <div id="loading-overlay">
    <div class="loading-content">
      <h1 id="loading-title">GeoForge SYSTEM v1.9.8<br>世界を創造しています！</h1>
      <div id="loading-log"></div>
    </div>
  </div>

  <input type="checkbox" id="menu-toggle" class="menu-toggle-checkbox">
  <label for="menu-toggle" class="menu-toggle-label">
      <span></span>
  </label>
  <div class="overlay"></div>

  <div class="container">
      <!-- ★★★ ここからUI構造を新しい分類に変更 ★★★ -->
      <aside class="sidebar">
          <h3>表示切替</h3>

          <!-- 1. 基本地図 (択一) -->
          <details open>
              <summary>基本地図</summary>
              <div class="map-type-selector">
                  <input type="radio" id="map-type-terrain" name="map-type" value="terrain" checked>
                  <label for="map-type-terrain">地形図</label>
                  <input type="radio" id="map-type-white" name="map-type" value="white">
                  <label for="map-type-white">白地図</label>
              </div>
          </details>
          
          <!-- 2. レイヤー (重ねがけ) -->
          <details open>
              <summary>レイヤー</summary>
              <ul>
                  <li><button id="toggleVegetationLayer" class="active">植生</button></li>
                  <li><button id="toggleReliefLayer" class="active">レリーフ</button></li>
                  <li><button id="toggleContourLayer" class="active">等高線</button></li>
                  <li><button id="toggleSettlementLayer" class="active">集落・国境</button></li>
                  <li><button id="toggleRoadLayer" class="active">道路網</button></li>
                  <li><button id="toggleTerritoryLayer">領地</button></li>
                  <li><button id="toggleRidgeWaterSystemLayer">稜線水系図</button></li>
              </ul>
          </details>

          <!-- 3. 地理情報 -->
          <details>
              <summary>地理情報</summary>
              <ul>
                  <li><button id="toggleTempLayer">気温</button></li>
                  <li><button id="togglePrecipLayer">降水量</button></li>
                  <li><button id="toggleClimateZoneLayer">気候帯</button></li>
                  <li><button id="togglePopulationLayer">人口分布</button></li>
              </ul>
          </details>
          
          <!-- 4. 資源 -->
          <details>
              <summary>資源</summary>
              <ul>
                  <li><button id="toggleManaLayer">魔力 (龍脈)</button></li>
                  <li><button id="toggleAgriLayer">農業</button></li>
                  <li><button id="toggleForestLayer">林業</button></li>
                  <li><button id="toggleMiningLayer">鉱業</button></li>
                  <li><button id="toggleFishingLayer">漁業</button></li>
              </ul>
              <p class="note">※酪農、狩猟は現在未実装です。</p>
          </details>
      </aside>

      <main class="main-content">
          <svg id="hexmap"></svg>
      </main>
  </div>
  <!-- ★★★ UI構造の変更ここまで ★★★ -->
  
  <div id="population-display"></div>

  <div id="info-window" class="hidden">
    <div class="info-window-header">
      <span id="info-coord">Information</span>
      <button id="info-close-btn" title="閉じる">×</button>
    </div>
    <div id="info-window-content">
    </div>
  </div>

  <script type="module" src="./main.js"></script>
</body>
</html>