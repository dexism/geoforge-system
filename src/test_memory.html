<!DOCTYPE html>
<html>

<head>

    async function test() {
    log("Starting memory optimization test...");

    const addLogMessage = async (msg) => log(`[LOG] ${msg}`);

    const start = performance.now();
    try {
    const allHexes = await generatePhysicalMap(addLogMessage);
    const end = performance.now();

    log(`Generation took ${(end - start).toFixed(2)}ms`);

    log(`Total hexes: ${allHexes.length}`);
    if (allHexes.length !== config.COLS * config.ROWS) {
    log(`Error: Expected ${config.COLS * config.ROWS} hexes, got ${allHexes.length}`);
    }

    const firstHex = allHexes[0];
    log("First hex loaded.");
    log(`First hex elevation: ${firstHex.properties.elevation}`);

    if (firstHex.properties.elevation === undefined) {
    log("Error: Elevation is undefined");
    }

    // Check neighbors
    log(`First hex neighbors count: ${firstHex.neighbors.length}`);

    log("Test completed successfully.");
    } catch (e) {
    log(`Error: ${e.message}`);
    console.error(e);
    }
    }

    test();
    </script>
    </body>

</html>